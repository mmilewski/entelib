{% extends 'base_with_top_menu.html' %}

{% block title %}Costcenter's details{% endblock %}

{% block header %}Costcenter's details{% endblock %}

{% block content %}

<div class="costcenter_one">
  <div class="inner_menu">
    <ul>
      {%if is_displaying and perms.baseapp.change_costcenter%}<li><a href="{% url costcenter_edit costcenter.id %}">Edit this costcenter</a> </li>{% endif %}
      <li><a href="{% url costcenter_all %}">Show all costcenters</a> </li>
      {%if is_displaying and perms.baseapp.add_costcenter%}<li><a href="{% url costcenter_add %}">Add another costcenter</a> </li>{% endif %}
      {%if is_updating%}<li><a href="{% url costcenter_one costcenter.id %}">Show this costcenter</a></li>{% endif %}
    </ul>
  </div>

    {% if not is_adding %}
    <div class="costcenter_info item_info">
      <ul class="details">
        <li><span class="label">Name:</span> {{costcenter.name}}</li>
      </ul>
      <li><span class="label">Maintainers:</span> 
        <ul class="maintainers">
          {% for mt in costcenter.maintainer.all %}
          <li>
            {% if perms.baseapp.view_others_profile %}
              <a href="{% url user_one mt.id %}">{{ mt }}</a>
            {% else %}
              {{ mt }}
            {% endif %}
            <ul class="phones">
              <li class="phone">
                  <a class="email" href="mailto:{{ mt.email }}">E-mail: {{ mt.email }}</a>
              </li>
              {% for p in mt.userprofile.phone.all %}
              <li class="phone">
                {%ifequal p.type.name "Skype" %}   <a class="skype" href="skype:{{p.value}}">{{p.type.name}}: {{p.value}}</a>
                {% else %}                         {{p.type.name}}: {{p.value}}
                {% endifequal %}
              </li>
              {% endfor %}
            </ul>
          </li>
          {% endfor %}
        </ul>
      </li>
    </div>
    {% endif %}


    {% if perms.baseapp.add_costcenter and form %}
      {% if display_tips %}
        <div class="tip" >
          <p>When you add or update an costcenter, you can add duplicate by mistake. On list below you will find costcenters'
            names which closely match to your input. If you find your input on the list, this means you tried to insert
            a duplicate.
          </p>
        </div>
      {% endif %}
    <div class="form_costcenterWrapper form_itemWrapper">
      <center>
        <form method="POST" action="." name="Fcostcenter">
            {{ form.non_field_errors }}
            <table>
                {% for field in form %}
                    <tr>
                        <td>{{ field.label_tag }}:
                          <br />
                          {{ field }}
                          {{ field.errors }}
                        </td>
                    </tr>
                {% endfor %}
                <tr>
                    <td></td>
                    <td>
                      {% if is_adding %}  <input type="submit" name="btn_add"    value="Not on the list, add new one">    {%endif%}
                      {% if is_updating %}<input type="submit" name="btn_update" value="Update costcenter"> {%endif%}
                    </td>
                </tr>
            </table>
        </form>
        <script type="text/javascript"> 
            document.Fcostcenter.id_name.focus();
        </script>
      </center>
    </div>
    {% endif %}

</div>    
{% endblock %}
